<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="706px" preserveAspectRatio="none" style="width:1178px;height:706px;background:#FFFFFF;" version="1.1" viewBox="0 0 1178 706" width="1178px" zoomAndPan="magnify"><defs><filter height="300%" id="ffipjhf5edvwa" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#ADD8E6" filter="url(#ffipjhf5edvwa)" height="589.0078" style="stroke:#000000;stroke-width:2.0;" width="1154" x="10" y="57.2969"/><rect fill="#ADD8E6" filter="url(#ffipjhf5edvwa)" height="449.6094" style="stroke:#000000;stroke-width:2.0;" width="1134" x="20" y="164.6953"/><rect fill="#ADD8E6" height="390.3438" style="stroke:none;stroke-width:1.0;" width="1134" x="20" y="223.9609"/><rect fill="#ADD8E6" filter="url(#ffipjhf5edvwa)" height="311.5391" style="stroke:#000000;stroke-width:2.0;" width="1114" x="30" y="270.7656"/><rect fill="#ADD8E6" filter="url(#ffipjhf5edvwa)" height="140.2031" style="stroke:#000000;stroke-width:2.0;" width="1094" x="40" y="353.1641"/><rect fill="#ADD8E6" height="43.9375" style="stroke:none;stroke-width:1.0;" width="1094" x="40" y="449.4297"/><rect fill="#ADD8E6" height="56.9375" style="stroke:none;stroke-width:1.0;" width="1114" x="30" y="525.3672"/><line style="stroke:#A80036;stroke-width:2.0;stroke-dasharray:5.0,5.0;" x1="74" x2="74" y1="40.2969" y2="663.3047"/><line style="stroke:#A80036;stroke-width:2.0;stroke-dasharray:5.0,5.0;" x1="521.5" x2="521.5" y1="40.2969" y2="663.3047"/><line style="stroke:#A80036;stroke-width:2.0;stroke-dasharray:5.0,5.0;" x1="1065" x2="1065" y1="40.2969" y2="663.3047"/><rect fill="#FEFECE" filter="url(#ffipjhf5edvwa)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="44" x="50" y="5"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="30" x="57" y="24.9951">APIX</text><rect fill="#FEFECE" filter="url(#ffipjhf5edvwa)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="44" x="50" y="662.3047"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="30" x="57" y="682.2998">APIX</text><rect fill="#FEFECE" filter="url(#ffipjhf5edvwa)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="41" x="499.5" y="5"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="27" x="506.5" y="24.9951">App</text><rect fill="#FEFECE" filter="url(#ffipjhf5edvwa)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="41" x="499.5" y="662.3047"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="27" x="506.5" y="682.2998">App</text><rect fill="#FEFECE" filter="url(#ffipjhf5edvwa)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="114" x="1006" y="5"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="100" x="1013" y="24.9951">Authentication</text><rect fill="#FEFECE" filter="url(#ffipjhf5edvwa)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="114" x="1006" y="662.3047"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="100" x="1013" y="682.2998">Authentication</text><path d="M10,57.2969 L162,57.2969 L162,64.2969 L152,74.2969 L10,74.2969 L10,57.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="589.0078" style="stroke:#000000;stroke-width:2.0;" width="1154" x="10" y="57.2969"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="107" x="25" y="70.3638">APIX 401 Error</text><polygon fill="#A80036" points="85,116.5625,75,120.5625,85,124.5625,81,120.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="79" x2="521" y1="120.5625" y2="120.5625"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="162" x="91" y="115.4966">makes a request with the</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="88" x="257" y="115.4966">accessToken</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="134" x="349" y="115.4966">asking for a resource</text><polygon fill="#A80036" points="510,145.6953,520,149.6953,510,153.6953,514,149.6953" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="74" x2="516" y1="149.6953" y2="149.6953"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="153" x="81" y="144.6294">APIX returns a response</text><path d="M20,164.6953 L84,164.6953 L84,171.6953 L74,181.6953 L20,181.6953 L20,164.6953 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="449.6094" style="stroke:#000000;stroke-width:2.0;" width="1134" x="20" y="164.6953"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="35" y="177.7622">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="81" x="99" y="176.9058">[on success]</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="522" x2="564" y1="202.9609" y2="202.9609"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="564" x2="564" y1="202.9609" y2="215.9609"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="523" x2="564" y1="215.9609" y2="215.9609"/><polygon fill="#A80036" points="533,211.9609,523,215.9609,533,219.9609,529,215.9609" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="177" x="529" y="197.895">consumes success reponse</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="1154" y1="224.9609" y2="224.9609"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="72" x="25" y="235.1714">[on failure]</text><path d="M30,270.7656 L94,270.7656 L94,277.7656 L84,287.7656 L30,287.7656 L30,270.7656 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="311.5391" style="stroke:#000000;stroke-width:2.0;" width="1114" x="30" y="270.7656"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="45" y="283.8325">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="104" x="109" y="282.9761">[401 error code]</text><polygon fill="#A80036" points="1053,305.0313,1063,309.0313,1053,313.0313,1057,309.0313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="522" x2="1059" y1="309.0313" y2="309.0313"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="211" x="529" y="303.9653">calls authenticate with the invalid</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="88" x="744" y="303.9653">accessToken</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="212" x="836" y="303.9653">to refresh for a new access token</text><polygon fill="#A80036" points="533,334.1641,523,338.1641,533,342.1641,529,338.1641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="527" x2="1064" y1="338.1641" y2="338.1641"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="235" x="539" y="333.0981">returns a possible valid access token</text><path d="M40,353.1641 L104,353.1641 L104,360.1641 L94,370.1641 L40,370.1641 L40,353.1641 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="140.2031" style="stroke:#000000;stroke-width:2.0;" width="1094" x="40" y="353.1641"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="55" y="366.231">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="128" x="119" y="365.3745">[valid accessToken]</text><polygon fill="#A80036" points="85,412.4297,75,416.4297,85,420.4297,81,416.4297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="79" x2="521" y1="416.4297" y2="416.4297"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="194" x="91" y="411.3638">continues the request with the</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="88" x="289" y="411.3638">accessToken</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="134" x="381" y="411.3638">asking for a resource</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="40" x2="1134" y1="450.4297" y2="450.4297"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="140" x="45" y="460.6401">[invalid accessToken]</text><polygon fill="#A80036" points="1053,481.3672,1063,485.3672,1053,489.3672,1057,485.3672" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="522" x2="1059" y1="485.3672" y2="485.3672"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="175" x="529" y="480.3013">shows session expiry dialog</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="30" x2="1144" y1="526.3672" y2="526.3672"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="141" x="35" y="536.5776">[any other error code]</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="522" x2="564" y1="561.3047" y2="561.3047"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="564" x2="564" y1="561.3047" y2="574.3047"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="523" x2="564" y1="574.3047" y2="574.3047"/><polygon fill="#A80036" points="533,570.3047,523,574.3047,533,578.3047,529,574.3047" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="156" x="529" y="556.2388">updates user with failure</text><!--MD5=[4a021face779599ae589b7e753afa399]
@startuml

!include authentication-theme.puml

participant Authentication order 3
participant App order 2
participant APIX order 1

group APIX 401 Error
  |||
  App -> APIX: makes a request with the ""accessToken"" asking for a resource
  APIX -> App: APIX returns a response
  alt on success
    App - -> App: consumes success reponse
  else on failure
    |||
    alt 401 error code
      App - -> Authentication: calls authenticate with the invalid ""accessToken"" to refresh for a new access token
      Authentication - -> App: returns a possible valid access token
      alt valid accessToken
      |||
        App -> APIX: continues the request with the ""accessToken"" asking for a resource
      |||  
      else invalid accessToken
        App - -> Authentication: shows session expiry dialog
      end
    |||
    else any other error code
      App - -> App: updates user with failure
    end
    |||
  end
  |||
end
@enduml

@startuml



skinparam defaultFontName       "Verdana"

skinparam title {
	FontColor	                 #2A9FD6
	BorderColor	                 #777777
	FontSize	    	         20
	BorderRoundCorner            8
	BorderThickness 	         1
	BackgroundColor              #LightBlue
}


skinparam sequence {
	BackgroundColor #LightBlue
	StartColor #2A9FD6
	EndColor #2A9FD6
	BoxBackgroundColor #LightBlue
	BoxBorderColor #000000
	BoxFontColor #000000
	DelayFontColor #000000
	LifeLineBorderThickness 2
	LifeLineBackgroundColor #LightBlue
	GroupBorderColor #000000
	GroupFontColor #000000
	GroupBodyBackgroundColor #LightBlue
	GroupHeaderBackgroundColor #LightBlue
	DividerBackgroundColor #LightBlue
    DividerBorderColor #000000
    DividerBorderThickness 2
    DividerFontColor #000000
	ReferenceBackgroundColor #LightBlue
	ReferenceBorderColor #000000
	ReferenceFontColor #000000
	ReferenceHeaderBackgroundColor #LightBlue
}



participant Authentication order 3
participant App order 2
participant APIX order 1

group APIX 401 Error
  |||
  App -> APIX: makes a request with the ""accessToken"" asking for a resource
  APIX -> App: APIX returns a response
  alt on success
    App - -> App: consumes success reponse
  else on failure
    |||
    alt 401 error code
      App - -> Authentication: calls authenticate with the invalid ""accessToken"" to refresh for a new access token
      Authentication - -> App: returns a possible valid access token
      alt valid accessToken
      |||
        App -> APIX: continues the request with the ""accessToken"" asking for a resource
      |||  
      else invalid accessToken
        App - -> Authentication: shows session expiry dialog
      end
    |||
    else any other error code
      App - -> App: updates user with failure
    end
    |||
  end
  |||
end
@enduml

PlantUML version 1.2021.11(Sat Oct 02 13:26:11 GMT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>