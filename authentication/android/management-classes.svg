<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="655.2083px" preserveAspectRatio="none" style="width:2531px;height:655px;background:#313238;" version="1.1" viewBox="0 0 2531 655" width="2531.25px" zoomAndPan="magnify"><defs/><g><!--MD5=[d6f1608c30fd6869d0da1db17620128f]
class AuthenticationLib--><!--MD5=[4fe1fcdbc9068749afa975104f4ea047]
class IDTMLib--><!--MD5=[95391c5bf41ae095fe7cd6b505129016]
class MockIDTMLib--><!--MD5=[55d4ff87441f71cb92c304f4365a4235]
class Events--><rect codeLine="3" fill="#313238" height="99.5605" id="Events" rx="4.1667" ry="4.1667" style="stroke:#55B2DE;stroke-width:1.0416666666666667;" width="171.875" x="281.25" y="536.4583"/><rect fill="#227FAB" height="35.3841" rx="4.1667" ry="4.1667" style="stroke:#227FAB;stroke-width:1.0416666666666667;" width="171.875" x="281.25" y="536.4583"/><rect fill="#227FAB" height="4.1667" style="stroke:#227FAB;stroke-width:1.0416666666666667;" width="171.875" x="281.25" y="567.6758"/><rect codeLine="3" fill="none" height="99.5605" id="Events" rx="4.1667" ry="4.1667" style="stroke:#55B2DE;stroke-width:1.0416666666666667;" width="171.875" x="281.25" y="536.4583"/><ellipse cx="335.9375" cy="554.1504" fill="#FB8500" rx="10.4167" ry="10.4167" style="stroke:#444444;stroke-width:1.0416666666666667;"/><path d="M337.8418,558.5775 Q337.4186,558.7891 336.9466,558.903 Q336.4746,559.0169 335.9701,559.0169 Q334.1146,559.0169 333.138,557.8125 Q332.1777,556.5918 332.1777,554.2969 Q332.1777,551.9857 333.138,550.7813 Q334.1146,549.5605 335.9701,549.5605 Q336.4746,549.5605 336.9466,549.6745 Q337.4349,549.7721 337.8418,550 L337.8418,552.002 Q337.3861,551.5788 336.9466,551.3835 Q336.5072,551.1719 336.0514,551.1719 Q335.0586,551.1719 334.554,551.9694 Q334.0495,552.7507 334.0495,554.2969 Q334.0495,555.8268 334.554,556.6081 Q335.0586,557.3893 336.0514,557.3893 Q336.5072,557.3893 336.9466,557.194 Q337.3861,556.9987 337.8418,556.5755 L337.8418,558.5775 Z " fill="#000000"/><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="43.75" x="360.9375" y="558.4778">Events</text><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;" x1="282.2917" x2="452.0833" y1="571.8424" y2="571.8424"/><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;" x1="282.2917" x2="452.0833" y1="580.1758" y2="580.1758"/><ellipse cx="292.7083" cy="591.6341" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="135.4167" x="306.25" y="600.1867">sendIDTMErrorEvents()</text><ellipse cx="292.7083" cy="615.389" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="114.5833" x="306.25" y="623.9415">sendSmapiEvents()</text><!--MD5=[353bd4dceeadb240fcd7dbd160e5b6c4]
class StatusProvider--><rect codeLine="8" fill="#313238" height="123.3154" id="StatusProvider" rx="4.1667" ry="4.1667" style="stroke:#55B2DE;stroke-width:1.0416666666666667;" width="181.25" x="490.1042" y="525"/><rect fill="#227FAB" height="35.3841" rx="4.1667" ry="4.1667" style="stroke:#227FAB;stroke-width:1.0416666666666667;" width="181.25" x="490.1042" y="525"/><rect fill="#227FAB" height="4.1667" style="stroke:#227FAB;stroke-width:1.0416666666666667;" width="181.25" x="490.1042" y="556.2174"/><rect codeLine="8" fill="none" height="123.3154" id="StatusProvider" rx="4.1667" ry="4.1667" style="stroke:#55B2DE;stroke-width:1.0416666666666667;" width="181.25" x="490.1042" y="525"/><ellipse cx="524.375" cy="542.6921" fill="#FB8500" rx="10.4167" ry="10.4167" style="stroke:#444444;stroke-width:1.0416666666666667;"/><path d="M526.2793,547.1191 Q525.8561,547.3307 525.3841,547.4447 Q524.9121,547.5586 524.4076,547.5586 Q522.5521,547.5586 521.5755,546.3542 Q520.6152,545.1335 520.6152,542.8385 Q520.6152,540.5273 521.5755,539.3229 Q522.5521,538.1022 524.4076,538.1022 Q524.9121,538.1022 525.3841,538.2161 Q525.8724,538.3138 526.2793,538.5417 L526.2793,540.5436 Q525.8236,540.1204 525.3841,539.9251 Q524.9447,539.7135 524.4889,539.7135 Q523.4961,539.7135 522.9915,540.5111 Q522.487,541.2923 522.487,542.8385 Q522.487,544.3685 522.9915,545.1497 Q523.4961,545.931 524.4889,545.931 Q524.9447,545.931 525.3841,545.7357 Q525.8236,545.5404 526.2793,545.1172 L526.2793,547.1191 Z " fill="#000000"/><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="95.8333" x="547.5" y="547.0194">StatusProvider</text><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;" x1="491.1458" x2="670.3125" y1="560.3841" y2="560.3841"/><ellipse cx="501.5625" cy="571.8424" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;fill:none;"/><text fill="#ADAFAE" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="84.375" x="515.1042" y="580.395">status: Status</text><ellipse cx="501.5625" cy="595.5973" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;fill:none;"/><text fill="#ADAFAE" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="139.5833" x="515.1042" y="604.1499">idtmStatus: IDTMStatus</text><ellipse cx="501.5625" cy="619.3522" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;fill:none;"/><text fill="#ADAFAE" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="144.7917" x="515.1042" y="627.9048">loginStatus: LoginStatus</text><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;" x1="491.1458" x2="670.3125" y1="639.9821" y2="639.9821"/><!--MD5=[fe171506cad3efc9ccc65cb039b8148a]
class TaskProcessor--><rect codeLine="14" fill="#313238" height="123.3154" id="TaskProcessor" rx="4.1667" ry="4.1667" style="stroke:#55B2DE;stroke-width:1.0416666666666667;" width="315.625" x="714.5833" y="525"/><rect fill="#227FAB" height="35.3841" rx="4.1667" ry="4.1667" style="stroke:#227FAB;stroke-width:1.0416666666666667;" width="315.625" x="714.5833" y="525"/><rect fill="#227FAB" height="4.1667" style="stroke:#227FAB;stroke-width:1.0416666666666667;" width="315.625" x="714.5833" y="556.2174"/><rect codeLine="14" fill="none" height="123.3154" id="TaskProcessor" rx="4.1667" ry="4.1667" style="stroke:#55B2DE;stroke-width:1.0416666666666667;" width="315.625" x="714.5833" y="525"/><ellipse cx="815.1042" cy="542.6921" fill="#FB8500" rx="10.4167" ry="10.4167" style="stroke:#444444;stroke-width:1.0416666666666667;"/><path d="M817.0085,547.1191 Q816.5853,547.3307 816.1133,547.4447 Q815.6413,547.5586 815.1367,547.5586 Q813.2813,547.5586 812.3047,546.3542 Q811.3444,545.1335 811.3444,542.8385 Q811.3444,540.5273 812.3047,539.3229 Q813.2813,538.1022 815.1367,538.1022 Q815.6413,538.1022 816.1133,538.2161 Q816.6016,538.3138 817.0085,538.5417 L817.0085,540.5436 Q816.5527,540.1204 816.1133,539.9251 Q815.6738,539.7135 815.2181,539.7135 Q814.2253,539.7135 813.7207,540.5111 Q813.2161,541.2923 813.2161,542.8385 Q813.2161,544.3685 813.7207,545.1497 Q814.2253,545.931 815.2181,545.931 Q815.6738,545.931 816.1133,545.7357 Q816.5527,545.5404 817.0085,545.1172 L817.0085,547.1191 Z " fill="#000000"/><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="95.8333" x="840.1042" y="547.0194">TaskProcessor</text><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;" x1="715.625" x2="1029.1667" y1="560.3841" y2="560.3841"/><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="722.9167" y="568.7174"/><text fill="#ADAFAE" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="279.1667" x="739.5833" y="580.395">pendingTasks: ConcurrentLinkedQueue&lt;Task&gt;</text><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;" x1="715.625" x2="1029.1667" y1="592.4723" y2="592.4723"/><ellipse cx="726.0417" cy="603.9307" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="115.625" x="739.5833" y="612.4832">addTask(task:Task)</text><ellipse cx="726.0417" cy="627.6855" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="110.4167" x="739.5833" y="636.2381">processNextTask()</text><!--MD5=[d3b8b572bebae7b58e75123213b35eb7]
class AuthenticationManagement--><rect codeLine="20" fill="#313238" height="75.8057" id="AuthenticationManagement" rx="4.1667" ry="4.1667" style="stroke:#55B2DE;stroke-width:1.0416666666666667;" width="222.9167" x="536.9792" y="54.6875"/><rect fill="#227FAB" height="35.3841" rx="4.1667" ry="4.1667" style="stroke:#227FAB;stroke-width:1.0416666666666667;" width="222.9167" x="536.9792" y="54.6875"/><rect fill="#227FAB" height="4.1667" style="stroke:#227FAB;stroke-width:1.0416666666666667;" width="222.9167" x="536.9792" y="85.9049"/><rect codeLine="20" fill="none" height="75.8057" id="AuthenticationManagement" rx="4.1667" ry="4.1667" style="stroke:#55B2DE;stroke-width:1.0416666666666667;" width="222.9167" x="536.9792" y="54.6875"/><ellipse cx="551.5625" cy="72.3796" fill="#A30000" rx="10.4167" ry="10.4167" style="stroke:#D63333;stroke-width:1.0416666666666667;"/><path d="M548.4538,69.5475 L548.4538,67.9525 L553.8737,67.9525 L553.8737,69.5475 L552.0671,69.5475 L552.0671,75.472 L553.8737,75.472 L553.8737,77.0671 L548.4538,77.0671 L548.4538,75.472 L550.2604,75.472 L550.2604,69.5475 L548.4538,69.5475 Z " fill="#000000"/><text fill="#222222" font-family="Verdana" font-size="12.5" font-style="italic" lengthAdjust="spacing" textLength="181.25" x="570.3125" y="76.7069">AuthenticationManagement</text><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;" x1="538.0208" x2="758.8542" y1="90.0716" y2="90.0716"/><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;" x1="538.0208" x2="758.8542" y1="98.4049" y2="98.4049"/><ellipse cx="548.4375" cy="109.8633" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="54.1667" x="561.9792" y="118.4158">cleanup()</text><!--MD5=[c7e69fcc6446aa1688d8e21bb85da6b3]
class InitializeManagement--><rect codeLine="24" fill="#313238" height="123.3154" id="InitializeManagement" rx="4.1667" ry="4.1667" style="stroke:#55B2DE;stroke-width:1.0416666666666667;" width="308.3333" x="914.0625" y="277.6042"/><rect fill="#227FAB" height="35.3841" rx="4.1667" ry="4.1667" style="stroke:#227FAB;stroke-width:1.0416666666666667;" width="308.3333" x="914.0625" y="277.6042"/><rect fill="#227FAB" height="4.1667" style="stroke:#227FAB;stroke-width:1.0416666666666667;" width="308.3333" x="914.0625" y="308.8216"/><rect codeLine="24" fill="none" height="123.3154" id="InitializeManagement" rx="4.1667" ry="4.1667" style="stroke:#55B2DE;stroke-width:1.0416666666666667;" width="308.3333" x="914.0625" y="277.6042"/><ellipse cx="990.625" cy="295.2962" fill="#FB8500" rx="10.4167" ry="10.4167" style="stroke:#444444;stroke-width:1.0416666666666667;"/><path d="M992.5293,299.7233 Q992.1061,299.9349 991.6341,300.0488 Q991.1621,300.1628 990.6576,300.1628 Q988.8021,300.1628 987.8255,298.9583 Q986.8652,297.7376 986.8652,295.4427 Q986.8652,293.1315 987.8255,291.9271 Q988.8021,290.7064 990.6576,290.7064 Q991.1621,290.7064 991.6341,290.8203 Q992.1224,290.918 992.5293,291.1458 L992.5293,293.1478 Q992.0736,292.7246 991.6341,292.5293 Q991.1947,292.3177 990.7389,292.3177 Q989.7461,292.3177 989.2415,293.1152 Q988.737,293.8965 988.737,295.4427 Q988.737,296.9727 989.2415,297.7539 Q989.7461,298.5352 990.7389,298.5352 Q991.1947,298.5352 991.6341,298.3398 Q992.0736,298.1445 992.5293,297.7214 L992.5293,299.7233 Z " fill="#000000"/><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="136.4583" x="1015.625" y="299.6236">InitializeManagement</text><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;" x1="915.1042" x2="1221.3542" y1="312.9883" y2="312.9883"/><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="922.3958" y="321.3216"/><text fill="#ADAFAE" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="271.875" x="939.0625" y="332.9992">initializationDisposable: CompositeDisposable</text><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;" x1="915.1042" x2="1221.3542" y1="345.0765" y2="345.0765"/><ellipse cx="925.5208" cy="356.5348" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="81.25" x="939.0625" y="365.0874">initializeIdtm()</text><rect fill="#F24D5C" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="922.3958" y="377.1647"/><text fill="#ADAFAE" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="231.25" x="939.0625" y="388.8423">initializeIdtmObservable(): Completable</text><!--MD5=[9c584f4605eff5e02969ddead110f659]
class AuthenticateManagement--><rect codeLine="30" fill="#313238" height="147.0703" id="AuthenticateManagement" rx="4.1667" ry="4.1667" style="stroke:#55B2DE;stroke-width:1.0416666666666667;" width="376.0417" x="7.2917" y="265.625"/><rect fill="#227FAB" height="35.3841" rx="4.1667" ry="4.1667" style="stroke:#227FAB;stroke-width:1.0416666666666667;" width="376.0417" x="7.2917" y="265.625"/><rect fill="#227FAB" height="4.1667" style="stroke:#227FAB;stroke-width:1.0416666666666667;" width="376.0417" x="7.2917" y="296.8424"/><rect codeLine="30" fill="none" height="147.0703" id="AuthenticateManagement" rx="4.1667" ry="4.1667" style="stroke:#55B2DE;stroke-width:1.0416666666666667;" width="376.0417" x="7.2917" y="265.625"/><ellipse cx="101.0417" cy="283.3171" fill="#FB8500" rx="10.4167" ry="10.4167" style="stroke:#444444;stroke-width:1.0416666666666667;"/><path d="M102.946,287.7441 Q102.5228,287.9557 102.0508,288.0697 Q101.5788,288.1836 101.0742,288.1836 Q99.2188,288.1836 98.2422,286.9792 Q97.2819,285.7585 97.2819,283.4635 Q97.2819,281.1523 98.2422,279.9479 Q99.2188,278.7272 101.0742,278.7272 Q101.5788,278.7272 102.0508,278.8411 Q102.5391,278.9388 102.946,279.1667 L102.946,281.1686 Q102.4902,280.7454 102.0508,280.5501 Q101.6113,280.3385 101.1556,280.3385 Q100.1628,280.3385 99.6582,281.1361 Q99.1536,281.9173 99.1536,283.4635 Q99.1536,284.9935 99.6582,285.7747 Q100.1628,286.556 101.1556,286.556 Q101.6113,286.556 102.0508,286.3607 Q102.4902,286.1654 102.946,285.7422 L102.946,287.7441 Z " fill="#000000"/><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="169.7917" x="126.0417" y="287.6444">AuthenticateManagement</text><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;" x1="8.3333" x2="382.2917" y1="301.0091" y2="301.0091"/><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="15.625" y="309.3424"/><text fill="#ADAFAE" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="286.4583" x="32.2917" y="321.02">authenticationDisposable: CompositeDisposable</text><rect fill="none" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="15.625" y="333.0973"/><text fill="#ADAFAE" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="247.9167" x="32.2917" y="344.7749">timeoutDisposable: CompositeDisposable</text><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;" x1="8.3333" x2="382.2917" y1="356.8522" y2="356.8522"/><ellipse cx="18.75" cy="368.3105" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="81.25" x="32.2917" y="376.8631">authenticate()</text><rect fill="#F24D5C" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="15.625" y="388.9404"/><text fill="#ADAFAE" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="339.5833" x="32.2917" y="400.618">handleAuthenticateSuccess(accessToken: AccessToken?)</text><!--MD5=[aebb90d2ec00eb1a78a6cb60340b5036]
class RefreshTokenManagement--><rect codeLine="37" fill="#313238" height="99.5605" id="RefreshTokenManagement" rx="4.1667" ry="4.1667" style="stroke:#55B2DE;stroke-width:1.0416666666666667;" width="457.2917" x="419.7917" y="289.0625"/><rect fill="#227FAB" height="35.3841" rx="4.1667" ry="4.1667" style="stroke:#227FAB;stroke-width:1.0416666666666667;" width="457.2917" x="419.7917" y="289.0625"/><rect fill="#227FAB" height="4.1667" style="stroke:#227FAB;stroke-width:1.0416666666666667;" width="457.2917" x="419.7917" y="320.2799"/><rect codeLine="37" fill="none" height="99.5605" id="RefreshTokenManagement" rx="4.1667" ry="4.1667" style="stroke:#55B2DE;stroke-width:1.0416666666666667;" width="457.2917" x="419.7917" y="289.0625"/><ellipse cx="551.5625" cy="306.7546" fill="#FB8500" rx="10.4167" ry="10.4167" style="stroke:#444444;stroke-width:1.0416666666666667;"/><path d="M553.4668,311.1816 Q553.0436,311.3932 552.5716,311.5072 Q552.0996,311.6211 551.5951,311.6211 Q549.7396,311.6211 548.763,310.4167 Q547.8027,309.196 547.8027,306.901 Q547.8027,304.5898 548.763,303.3854 Q549.7396,302.1647 551.5951,302.1647 Q552.0996,302.1647 552.5716,302.2786 Q553.0599,302.3763 553.4668,302.6042 L553.4668,304.6061 Q553.0111,304.1829 552.5716,303.9876 Q552.1322,303.776 551.6764,303.776 Q550.6836,303.776 550.179,304.5736 Q549.6745,305.3548 549.6745,306.901 Q549.6745,308.431 550.179,309.2122 Q550.6836,309.9935 551.6764,309.9935 Q552.1322,309.9935 552.5716,309.7982 Q553.0111,309.6029 553.4668,309.1797 L553.4668,311.1816 Z " fill="#000000"/><text fill="#222222" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="175" x="576.5625" y="311.0819">RefreshTokenManagement</text><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;" x1="420.8333" x2="876.0417" y1="324.4466" y2="324.4466"/><line style="stroke:#55B2DE;stroke-width:1.0416666666666667;" x1="420.8333" x2="876.0417" y1="332.7799" y2="332.7799"/><ellipse cx="431.25" cy="344.2383" fill="#84BE84" rx="3.125" ry="3.125" style="stroke:#038048;stroke-width:1.0416666666666667;"/><text fill="#ADAFAE" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="420.8333" x="444.7917" y="352.7908">fetchAccessToken(accessToken: String? = null): Single&lt;AccessToken&gt;</text><rect fill="#F24D5C" height="6.25" style="stroke:#C82930;stroke-width:1.0416666666666667;" width="6.25" x="428.125" y="364.8682"/><text fill="#ADAFAE" font-family="Verdana" font-size="11.4583" lengthAdjust="spacing" textLength="406.25" x="444.7917" y="376.5457">rawFetchAccessToken(accessToken: String?): Single&lt;AccessToken&gt;</text><!--MD5=[f3a9563f6cf965595c825d3532b671a1]
reverse link AuthenticationLib to IDTMLib--><!--MD5=[fe5a957dc110cb141052193e501bb307]
reverse link AuthenticationLib to MockIDTMLib--><!--MD5=[a2b625d1976ade2fd2054f26d3c98189]
reverse link AuthenticationManagement to InitializeManagement--><path d="M730.2604,141.3646 C797.0938,180.25 891.9792,235.4688 964.2083,277.4896 " fill="none" id="AuthenticationManagement-backto-InitializeManagement" style="stroke:#2A9FD6;stroke-width:3.125;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="726.5313,147.625,712.1979,130.8542,733.8646,135.0208,726.5313,147.625" style="stroke:#2A9FD6;stroke-width:3.125;"/><!--MD5=[779b8f92d5fb1d98c8c589048174b262]
reverse link AuthenticationManagement to AuthenticateManagement--><path d="M560.9792,140.8958 C495.4063,176.25 404.4583,225.2708 329.6771,265.5833 " fill="none" id="AuthenticationManagement-backto-AuthenticateManagement" style="stroke:#2A9FD6;stroke-width:3.125;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="557.8229,134.3125,579.6146,130.8542,564.7396,147.1563,557.8229,134.3125" style="stroke:#2A9FD6;stroke-width:3.125;"/><!--MD5=[f1dff566fb9a5c2b535396a92cf93baa]
reverse link AuthenticationManagement to RefreshTokenManagement--><path d="M648.4375,151.8229 C648.4375,193.5417 648.4375,249.1667 648.4375,288.7292 " fill="none" id="AuthenticationManagement-backto-RefreshTokenManagement" style="stroke:#2A9FD6;stroke-width:3.125;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="641.1458,151.6875,648.4375,130.8542,655.7292,151.6875,641.1458,151.6875" style="stroke:#2A9FD6;stroke-width:3.125;"/><!--MD5=[c99a4152411d37518be55dead4e656b2]
link InitializeManagement to StatusProvider--><path codeLine="9" d="M1022.4375,400.6875 C994.0625,433.6875 954.7396,472.0938 910.9375,493.75 C824.5417,536.4583 788.0417,495.3229 696.3542,525 C689.8333,527.1146 683.2292,529.5729 676.6667,532.2604 " fill="none" id="InitializeManagement-to-StatusProvider" style="stroke:#2A9FD6;stroke-width:3.125;"/><polygon fill="#2A9FD6" points="671.6563,534.3646,681.9135,534.5667,676.4564,532.3435,678.6797,526.8864,671.6563,534.3646" style="stroke:#2A9FD6;stroke-width:3.125;"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="43.75" x="957.8125" y="485.5611">«calls»</text><!--MD5=[273893bc352a5c58103f6cb9676a160b]
link InitializeManagement to TaskProcessor--><path codeLine="10" d="M1063.125,400.6354 C1058.0104,431.0521 1047.8333,467.0208 1027.6042,493.75 C1020,503.7917 1010.9583,512.9479 1001.1042,521.2396 " fill="none" id="InitializeManagement-to-TaskProcessor" style="stroke:#2A9FD6;stroke-width:3.125;"/><polygon fill="#2A9FD6" points="996.8333,524.7396,1006.726,522.0218,1000.8624,521.439,1001.4452,515.5754,996.8333,524.7396" style="stroke:#2A9FD6;stroke-width:3.125;"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="43.75" x="1049.4792" y="485.5611">«calls»</text><!--MD5=[6e3b7f3af97736509cd1b0faae2b33e8]
link InitializeManagement to Events--><path codeLine="11" d="M974.2083,400.7396 C949.3854,414.4167 922.0417,427.5208 895.3125,436.4583 C799.1354,468.6354 762.6771,428.1875 669.2708,467.7083 C651.9583,475.0313 653.0625,485.9896 635.9375,493.75 C568.1146,524.4792 541.125,499.0104 471.3542,525 C464.3542,527.6042 457.2708,530.6667 450.2708,534 " fill="none" id="InitializeManagement-to-Events" style="stroke:#2A9FD6;stroke-width:3.125;"/><polygon fill="#2A9FD6" points="445.4479,536.3438,455.7012,535.9957,450.1329,534.0682,452.0604,528.4998,445.4479,536.3438" style="stroke:#2A9FD6;stroke-width:3.125;"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="43.75" x="675.5208" y="485.5611">«calls»</text><!--MD5=[3fc6f3b59ea5f83a3f7749b58821cb9e]
link AuthenticateManagement to StatusProvider--><path codeLine="13" d="M343.0104,412.5833 C374.3542,429.5729 406.7708,448.3854 435.9375,467.7083 C460.2188,483.7917 485.3021,503.0938 507.6354,521.375 " fill="none" id="AuthenticateManagement-to-StatusProvider" style="stroke:#2A9FD6;stroke-width:3.125;"/><polygon fill="#2A9FD6" points="511.7708,524.7813,507.1959,515.5986,507.7551,521.4645,501.8891,522.0238,511.7708,524.7813" style="stroke:#2A9FD6;stroke-width:3.125;"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="43.75" x="476.5625" y="485.5611">«calls»</text><!--MD5=[bfc85534737757e527faceaf9e067686]
link AuthenticateManagement to TaskProcessor--><path codeLine="14" d="M333.7708,412.5938 C355.9792,421.9271 379.0625,430.3438 401.5625,436.4583 C544.7083,475.3646 597.1667,410.0729 733.8542,467.7083 C738.1458,469.5208 768.0104,494.75 798.9167,521.3854 " fill="none" id="AuthenticateManagement-to-TaskProcessor" style="stroke:#2A9FD6;stroke-width:3.125;"/><polygon fill="#2A9FD6" points="803.0833,524.9792,798.7143,515.6968,799.1426,521.5737,793.2656,522.002,803.0833,524.9792" style="stroke:#2A9FD6;stroke-width:3.125;"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="43.75" x="771.3542" y="485.5611">«calls»</text><!--MD5=[eb9091dc022f14f7b79329339ed76711]
link AuthenticateManagement to Events--><path codeLine="15" d="M223.6458,412.8125 C235.7188,439.5 251.2188,469.1771 269.2708,493.75 C279.2604,507.3542 291.4479,520.6042 303.7917,532.6146 " fill="none" id="AuthenticateManagement-to-Events" style="stroke:#2A9FD6;stroke-width:3.125;"/><polygon fill="#2A9FD6" points="307.6146,536.3021,303.7387,526.8032,303.858,532.6945,297.9666,532.8138,307.6146,536.3021" style="stroke:#2A9FD6;stroke-width:3.125;"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="43.75" x="275.5208" y="485.5611">«calls»</text><!--MD5=[f521ca89d31cec927e043d3a45ee9d7c]
link RefreshTokenManagement to StatusProvider--><path codeLine="17" d="M612.3333,389.2917 C597.8646,411.9583 582.8854,439.9688 575.5208,467.7083 C571.1458,484.1875 570.1667,502.4271 570.8438,519.5208 " fill="none" id="RefreshTokenManagement-to-StatusProvider" style="stroke:#2A9FD6;stroke-width:3.125;"/><polygon fill="#2A9FD6" points="571.1042,524.7813,574.8098,515.2146,570.8508,519.5791,566.4863,515.6201,571.1042,524.7813" style="stroke:#2A9FD6;stroke-width:3.125;"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="43.75" x="581.7708" y="485.5611">«calls»</text><!--MD5=[759ee7f4f25b375000519a1b71b7668b]
link RefreshTokenManagement to TaskProcessor--><path codeLine="18" d="M742.2188,389.1354 C774.2917,409.7604 808.0313,436.3125 831.7708,467.7083 C843.3333,483 851.7604,501.8125 857.8333,519.8854 " fill="none" id="RefreshTokenManagement-to-TaskProcessor" style="stroke:#2A9FD6;stroke-width:3.125;"/><polygon fill="#2A9FD6" points="859.4896,524.9583,860.5518,514.7542,857.8784,520.0055,852.6272,517.3321,859.4896,524.9583" style="stroke:#2A9FD6;stroke-width:3.125;"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="43.75" x="852.6042" y="485.5611">«calls»</text><!--MD5=[a08be2055c41caea094b86cc6a5ce501]
link RefreshTokenManagement to Events--><path codeLine="19" d="M472.4271,389.2083 C434.7604,407.8333 399.2188,433.2188 375.5208,467.7083 C363.0625,485.8438 359.5833,509.4792 359.7604,530.8021 " fill="none" id="RefreshTokenManagement-to-Events" style="stroke:#2A9FD6;stroke-width:3.125;"/><polygon fill="#2A9FD6" points="359.875,536.1771,363.8263,526.7093,359.756,530.9701,355.4952,526.8997,359.875,536.1771" style="stroke:#2A9FD6;stroke-width:3.125;"/><text fill="#FFFFFF" font-family="Verdana" font-size="12.5" lengthAdjust="spacing" textLength="43.75" x="381.7708" y="485.5611">«calls»</text><!--MD5=[833f75447ecf4c52b05d95c375f34acc]
@startuml

!include authentication-manager-classes-include.puml

hide AuthenticationManager
hide AuthenticationLib
hide IDTMLib
hide MockIDTMLib

InitializeManagement - -> StatusProvider: <<calls>>
InitializeManagement - -> TaskProcessor: <<calls>>
InitializeManagement - -> Events: <<calls>>

AuthenticateManagement -right-> StatusProvider: <<calls>>
AuthenticateManagement - -> TaskProcessor: <<calls>>
AuthenticateManagement - -> Events: <<calls>>

RefreshTokenManagement - -> StatusProvider: <<calls>>
RefreshTokenManagement - -> TaskProcessor: <<calls>>
RefreshTokenManagement - -> Events: <<calls>>

@enduml

@startuml





skinparam backgroundColor transparent
skinparam useBetaStyle false







skinparam defaultFontName       "Verdana"
skinparam defaultFontSize       12
skinparam dpi                   100
skinparam shadowing             false
skinparam roundcorner           8
skinparam ParticipantPadding    40
skinparam BoxPadding            40
skinparam Padding               5
skinparam ArrowColor            #ADAFAE
skinparam stereotype {
    CBackgroundColor #777777
    CBorderColor #444444
    ABackgroundColor #5F8F00
    ABorderColor #92C233
    IBackgroundColor #a30000
    IBorderColor #D63333
    EBackgroundColor #cc6d00
    EBorderColor #FFA033
    NBackgroundColor #7a29a3
    NBorderColor #AD5CD6
}
skinparam title {
	FontColor	                 #2A9FD6
	BorderColor	                 #777777
	FontSize	    	         20
	BorderRoundCorner            8
	BorderThickness 	         1
	BackgroundColor              transparent
}

skinparam legend {
	BackgroundColor transparent
	BorderColor #777777
	FontColor #ADAFAE
}

skinparam swimlane {
	BorderColor #9933CC
	BorderThickness 2
	TitleBackgroundColor  #444444-#555
	TitleFontColor #2A9FD6
}


skinparam activity {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
	BarColor #77B300
	StartColor #9933CC
	EndColor #9933CC
	DiamondBackgroundColor transparent
  	DiamondBorderColor #777777
  	DiamondFontColor #777777
}


skinparam participant {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
	ParticipantBorderThickness 2
}


skinparam actor {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
	FontColor #2A9FD6
}


skinparam arrow {
	Thickness 3
	Color #2A9FD6
	FontColor #FFF
}


skinparam sequence {
	BorderColor #2A9FD6
	TitleFontColor #2A9FD6
	BackgroundColor transparent
	StartColor #2A9FD6
	EndColor #2A9FD6
	BoxBackgroundColor transparent
	BoxBorderColor #ADAFAE
	BoxFontColor #ADAFAE
	DelayFontColor #ADAFAE
	LifeLineBorderColor #555
	LifeLineBorderThickness 2
	LifeLineBackgroundColor transparent
	GroupBorderColor #ADAFAE
	GroupFontColor #ADAFAE
	GroupHeaderFontColor #9933CC
	GroupBackgroundColor transparent
	GroupBodyBackgroundColor transparent
	GroupHeaderBackgroundColor transparent
	DividerBackgroundColor transparent
    DividerBorderColor #ADAFAE
    DividerBorderThickness 2
    DividerFontColor #ADAFAE
	ReferenceBackgroundColor transparent
	ReferenceBorderColor #ADAFAE
	ReferenceFontColor #ADAFAE
	ReferenceHeaderFontColor #9933CC
	ReferenceHeaderBackgroundColor transparent
	StereotypeFontColor #2A9FD6
}


skinparam partition {
	BorderColor #2A9FD6
	FontColor #2A9FD6
	BackgroundColor transparent
}


skinparam collections {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
}


skinparam control {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
	FontColor #2A9FD6
}


skinparam entity {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
	FontColor #2A9FD6
}


skinparam boundary {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
	FontColor #2A9FD6
}


skinparam agent {
	BackgroundColor transparent
	BorderColor #cc6d00
	FontColor #ADAFAE
}


skinparam note {
	BorderThickness 1
	BackgroundColor transparent
	BorderColor #AD5CD6
	FontColor #AD5CD6
}


skinparam artifact {
	BackgroundColor transparent
	BorderColor #BDBFBE
	FontColor #BDBFBE
}


skinparam component {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
}


skinparam interface {
	BackgroundColor  transparent
	BorderColor  #CC0000
	FontColor #ADAFAE
}


skinparam storage {
	BackgroundColor transparent
  	BorderColor #FFA033
	FontColor #FF8800
}


skinparam node {
	BackgroundColor  transparent
	BorderColor #ADAFAE
	FontColor #ADAFAE
}


skinparam cloud {
	BackgroundColor transparent
	BorderColor #F2FCFE
	FontColor #ADAFAE
}


skinparam database {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
	FontColor #2A9FD6
}



skinparam class {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
        FontColor #222
	HeaderBackgroundColor #227FAB
	StereotypeFontColor #ADAFAE
	BorderThickness 1
	AttributeFontColor #ADAFAE
	AttributeFontSize 11
}


skinparam object {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
	StereotypeFontColor #ADAFAE
	BorderThickness 1
	AttributeFontColor #777777
	AttributeFontSize 11
}


skinparam usecase {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
	BorderThickness 2
	StereotypeFontColor #2A9FD6
}


skinparam rectangle {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
	BorderThickness 2
	StereotypeFontColor #2A9FD6
}


skinparam package {
	BackgroundColor transparent
  	BorderColor #2A9FD6
	FontColor #2A9FD6
	BorderThickness 2
}


skinparam folder {
	BackgroundColor transparent
  	BorderColor #FF8800
	FontColor #FF8800
	BorderThickness 2
}


skinparam frame {
	BackgroundColor transparent
  	BorderColor #9933CC
	FontColor #9933CC
	BorderThickness 2
}


skinparam state {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
	StartColor #9933CC
	EndColor #9933CC
	AttributeFontColor #777777
	AttributeFontSize 11
}


skinparam queue {
		FontColor #2A9FD6
	BorderColor #55B2DE
	BackgroundColor transparent
}


skinparam card {
	BackgroundColor transparent
	BorderColor #9933CC
	FontColor #9933CC
}


skinparam file {
	BackgroundColor transparent
	BorderColor #555
	FontColor #555
}



skinparam BackgroundColor #313238
skinparam StereotypeCBackgroundColor #fb8500

skinparam StereotypeCBackgroundColor<<S>> #e840e8
skinparam SpotChar<<S>> S
hide <<S>> stereotype

skinparam StereotypeCBackgroundColor<<E>> #10FF30
skinparam SpotChar<<E>> E
hide <<E>> stereotype




interface AuthenticationLib {
  +sdkId: String
  +authenticate(showIdGateway: Boolean, invalidateToken: String?, observer: AuthenticateObserver)
  +fetchAccessToken(invalidateToken: String?, observer: AuthenticateObserver)
  +initialize(initializationObserver: InitializeObserver)
  +fun logout()
}

class IDTMLib implements AuthenticationLib {
  +sdkId: String
  +fetchAccessToken(invalidateToken: String?, authenticateObserver: AuthenticateObserver)
  +logout()
  +initialize(observer: InitializeObserver)
  +authenticate(showIdGateway: Boolean, invalidateToken: String?, observer: AuthenticateObserver)
  +getInstance(): IdtmLib
}

class MockIDTMLib implements AuthenticationLib {

    +authenticate(showIdGateway: Boolean, invalidateToken: String?, observer: AuthenticateObserver)
    +fetchAccessToken(invalidateToken: String?, observer: AuthenticateObserver)
    +initialize(initializationObserver: InitializeObserver)
    +logout()
}

class Events {
  +sendIDTMErrorEvents()
  +sendSmapiEvents()
}

class StatusProvider {
  +status: Status
  +idtmStatus: IDTMStatus
  +loginStatus: LoginStatus
}

class TaskProcessor {
  -pendingTasks: ConcurrentLinkedQueue<Task>
  +addTask(task:Task)
  +processNextTask()
}

interface AuthenticationManagement {
  +cleanup()
}

class InitializeManagement implements AuthenticationManagement {
  -initializationDisposable: CompositeDisposable
  +initializeIdtm()
  -initializeIdtmObservable(): Completable
}

class AuthenticateManagement implements AuthenticationManagement {
  -authenticationDisposable: CompositeDisposable
  -timeoutDisposable: CompositeDisposable
  +authenticate()
  -handleAuthenticateSuccess(accessToken: AccessToken?)
}

class RefreshTokenManagement implements AuthenticationManagement {
 +fetchAccessToken(accessToken: String? = null): Single<AccessToken>
 -rawFetchAccessToken(accessToken: String?): Single<AccessToken>
}


hide AuthenticationManager
hide AuthenticationLib
hide IDTMLib
hide MockIDTMLib

InitializeManagement - -> StatusProvider: <<calls>>
InitializeManagement - -> TaskProcessor: <<calls>>
InitializeManagement - -> Events: <<calls>>

AuthenticateManagement -right-> StatusProvider: <<calls>>
AuthenticateManagement - -> TaskProcessor: <<calls>>
AuthenticateManagement - -> Events: <<calls>>

RefreshTokenManagement - -> StatusProvider: <<calls>>
RefreshTokenManagement - -> TaskProcessor: <<calls>>
RefreshTokenManagement - -> Events: <<calls>>

@enduml

PlantUML version 1.2021.11(Sat Oct 02 13:26:11 GMT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>