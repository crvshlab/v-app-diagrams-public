<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="708px" preserveAspectRatio="none" style="width:1193px;height:708px;background:#FFFFFF;" version="1.1" viewBox="0 0 1193 708" width="1193px" zoomAndPan="magnify"><defs><filter height="300%" id="f11dgbtrrzgm03" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#ADD8E6" filter="url(#f11dgbtrrzgm03)" height="590.4094" style="stroke:#000000;stroke-width:2.0;" width="1169.5" x="10" y="57.2969"/><rect fill="#ADD8E6" filter="url(#f11dgbtrrzgm03)" height="450.5438" style="stroke:#000000;stroke-width:2.0;" width="1149.5" x="20" y="165.1625"/><rect fill="#ADD8E6" height="391.2782" style="stroke:none;stroke-width:1.0;" width="1149.5" x="20" y="224.4281"/><rect fill="#ADD8E6" filter="url(#f11dgbtrrzgm03)" height="312.4735" style="stroke:#000000;stroke-width:2.0;" width="1129.5" x="30" y="271.2328"/><rect fill="#ADD8E6" filter="url(#f11dgbtrrzgm03)" height="140.6703" style="stroke:#000000;stroke-width:2.0;" width="1109.5" x="40" y="354.0985"/><rect fill="#ADD8E6" height="43.9375" style="stroke:none;stroke-width:1.0;" width="1109.5" x="40" y="450.8313"/><rect fill="#ADD8E6" height="56.9375" style="stroke:none;stroke-width:1.0;" width="1129.5" x="30" y="526.7688"/><line style="stroke:#A80036;stroke-width:2.0;stroke-dasharray:5.0,5.0;" x1="75" x2="75" y1="40.2969" y2="664.7063"/><line style="stroke:#A80036;stroke-width:2.0;stroke-dasharray:5.0,5.0;" x1="526.5" x2="526.5" y1="40.2969" y2="664.7063"/><line style="stroke:#A80036;stroke-width:2.0;stroke-dasharray:5.0,5.0;" x1="1076.5" x2="1076.5" y1="40.2969" y2="664.7063"/><rect fill="#FEFECE" filter="url(#f11dgbtrrzgm03)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="47" x="50" y="5"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="33" x="57" y="24.9951">APIX</text><rect fill="#FEFECE" filter="url(#f11dgbtrrzgm03)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="47" x="50" y="663.7063"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="33" x="57" y="683.7014">APIX</text><rect fill="#FEFECE" filter="url(#f11dgbtrrzgm03)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="44" x="502.5" y="5"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="30" x="509.5" y="24.9951">App</text><rect fill="#FEFECE" filter="url(#f11dgbtrrzgm03)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="44" x="502.5" y="663.7063"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="30" x="509.5" y="683.7014">App</text><rect fill="#FEFECE" filter="url(#f11dgbtrrzgm03)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="122" x="1013.5" y="5"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="108" x="1020.5" y="24.9951">Authentication</text><rect fill="#FEFECE" filter="url(#f11dgbtrrzgm03)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="122" x="1013.5" y="663.7063"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="108" x="1020.5" y="683.7014">Authentication</text><path d="M10,57.2969 L168,57.2969 L168,64.2969 L158,74.2969 L10,74.2969 L10,57.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="590.4094" style="stroke:#000000;stroke-width:2.0;" width="1169.5" x="10" y="57.2969"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="113" x="25" y="70.3638">APIX 401 Error</text><polygon fill="#A80036" points="86.5,117.0297,76.5,121.0297,86.5,125.0297,82.5,121.0297" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="80.5" x2="525.5" y1="121.0297" y2="121.0297"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="164" x="92.5" y="115.9638">makes a request with the</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="88" x="260.5" y="115.4677">accessToken</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="135" x="352.5" y="115.9638">asking for a resource</text><polygon fill="#A80036" points="514.5,146.1625,524.5,150.1625,514.5,154.1625,518.5,150.1625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="75.5" x2="520.5" y1="150.1625" y2="150.1625"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="154" x="82.5" y="145.0966">APIX returns a response</text><path d="M20,165.1625 L86,165.1625 L86,172.1625 L76,182.1625 L20,182.1625 L20,165.1625 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="450.5438" style="stroke:#000000;stroke-width:2.0;" width="1149.5" x="20" y="165.1625"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="35" y="178.2294">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="82" x="101" y="177.373">[on success]</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="526.5" x2="568.5" y1="203.4281" y2="203.4281"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="568.5" x2="568.5" y1="203.4281" y2="216.4281"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="527.5" x2="568.5" y1="216.4281" y2="216.4281"/><polygon fill="#A80036" points="537.5,212.4281,527.5,216.4281,537.5,220.4281,533.5,216.4281" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="177" x="533.5" y="198.3622">consumes success reponse</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="1169.5" y1="225.4281" y2="225.4281"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="76" x="25" y="235.6386">[on failure]</text><path d="M30,271.2328 L96,271.2328 L96,278.2328 L86,288.2328 L30,288.2328 L30,271.2328 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="312.4735" style="stroke:#000000;stroke-width:2.0;" width="1129.5" x="30" y="271.2328"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="45" y="284.2997">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="110" x="111" y="283.4433">[401 error code]</text><polygon fill="#A80036" points="1064.5,305.9657,1074.5,309.9657,1064.5,313.9657,1068.5,309.9657" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="526.5" x2="1070.5" y1="309.9657" y2="309.9657"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="214" x="533.5" y="304.8997">calls authenticate with the invalid</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="88" x="751.5" y="304.4036">accessToken</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="216" x="843.5" y="304.8997">to refresh for a new access token</text><polygon fill="#A80036" points="537.5,335.0985,527.5,339.0985,537.5,343.0985,533.5,339.0985" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="531.5" x2="1075.5" y1="339.0985" y2="339.0985"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="236" x="543.5" y="334.0325">returns a possible valid access token</text><path d="M40,354.0985 L106,354.0985 L106,361.0985 L96,371.0985 L40,371.0985 L40,354.0985 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="140.6703" style="stroke:#000000;stroke-width:2.0;" width="1109.5" x="40" y="354.0985"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="55" y="367.1654">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="130" x="121" y="366.3089">[valid accessToken]</text><polygon fill="#A80036" points="86.5,413.8313,76.5,417.8313,86.5,421.8313,82.5,417.8313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="80.5" x2="525.5" y1="417.8313" y2="417.8313"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="196" x="92.5" y="412.7654">continues the request with the</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="88" x="292.5" y="412.2693">accessToken</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="135" x="384.5" y="412.7654">asking for a resource</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="40" x2="1149.5" y1="451.8313" y2="451.8313"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="142" x="45" y="462.0417">[invalid accessToken]</text><polygon fill="#A80036" points="1064.5,482.7688,1074.5,486.7688,1064.5,490.7688,1068.5,486.7688" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="526.5" x2="1070.5" y1="486.7688" y2="486.7688"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="179" x="533.5" y="481.7029">shows session expiry dialog</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="30" x2="1159.5" y1="527.7688" y2="527.7688"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="150" x="35" y="537.9792">[any other error code]</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="526.5" x2="568.5" y1="562.7063" y2="562.7063"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="568.5" x2="568.5" y1="562.7063" y2="575.7063"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="527.5" x2="568.5" y1="575.7063" y2="575.7063"/><polygon fill="#A80036" points="537.5,571.7063,527.5,575.7063,537.5,579.7063,533.5,575.7063" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="159" x="533.5" y="557.6404">updates user with failure</text><!--MD5=[f76307aa849e00c39e622626cd3afd44]
@startuml
!$PRIMARY = "#2A9FD6"
!$SECONDARY_DARK = "#777777"
!$BGCOLOR = "#LightBlue"
!$DARK = "#000000"

skinparam defaultFontName       "Verdana"

skinparam title {
	FontColor	                 $PRIMARY
	BorderColor	                 $SECONDARY_DARK
	FontSize	    	         20
	BorderRoundCorner            8
	BorderThickness 	         1
	BackgroundColor              $BGCOLOR
}

!startsub sequence

skinparam sequence {
	BackgroundColor $BGCOLOR
	StartColor $PRIMARY
	EndColor $PRIMARY
	''
	BoxBackgroundColor $BGCOLOR
	BoxBorderColor $DARK
	BoxFontColor $DARK
	''
	DelayFontColor $DARK
	''
	LifeLineBorderThickness 2
	LifeLineBackgroundColor $BGCOLOR
	''
	GroupBorderColor $DARK
	GroupFontColor $DARK
	GroupBodyBackgroundColor $BGCOLOR
	GroupHeaderBackgroundColor $BGCOLOR
	''
	DividerBackgroundColor $BGCOLOR
    DividerBorderColor $DARK
    DividerBorderThickness 2
    DividerFontColor $DARK
	''
	ReferenceBackgroundColor $BGCOLOR
	ReferenceBorderColor $DARK
	ReferenceFontColor $DARK
	ReferenceHeaderBackgroundColor $BGCOLOR
}
!endsub

!procedure loop_arrowR()
  <<- - -
!endprocedure

participant Authentication order 3
participant App order 2
participant APIX order 1

group APIX 401 Error
  |||
  App -> APIX: makes a request with the ""accessToken"" asking for a resource
  APIX -> App: APIX returns a response
  alt on success
    App - -> App: consumes success reponse
  else on failure
    |||
    alt 401 error code
      App - -> Authentication: calls authenticate with the invalid ""accessToken"" to refresh for a new access token
      Authentication - -> App: returns a possible valid access token
      alt valid accessToken
      |||
        App -> APIX: continues the request with the ""accessToken"" asking for a resource
      |||  
      else invalid accessToken
        App - -> Authentication: shows session expiry dialog
      end
    |||
    else any other error code
      App - -> App: updates user with failure
    end
    |||
  end
  |||
end
@enduml

@startuml

skinparam defaultFontName       "Verdana"

skinparam title {
	FontColor	                 #2A9FD6
	BorderColor	                 #777777
	FontSize	    	         20
	BorderRoundCorner            8
	BorderThickness 	         1
	BackgroundColor              #LightBlue
}


skinparam sequence {
	BackgroundColor #LightBlue
	StartColor #2A9FD6
	EndColor #2A9FD6
	BoxBackgroundColor #LightBlue
	BoxBorderColor #000000
	BoxFontColor #000000
	DelayFontColor #000000
	LifeLineBorderThickness 2
	LifeLineBackgroundColor #LightBlue
	GroupBorderColor #000000
	GroupFontColor #000000
	GroupBodyBackgroundColor #LightBlue
	GroupHeaderBackgroundColor #LightBlue
	DividerBackgroundColor #LightBlue
    DividerBorderColor #000000
    DividerBorderThickness 2
    DividerFontColor #000000
	ReferenceBackgroundColor #LightBlue
	ReferenceBorderColor #000000
	ReferenceFontColor #000000
	ReferenceHeaderBackgroundColor #LightBlue
}


participant Authentication order 3
participant App order 2
participant APIX order 1

group APIX 401 Error
  |||
  App -> APIX: makes a request with the ""accessToken"" asking for a resource
  APIX -> App: APIX returns a response
  alt on success
    App - -> App: consumes success reponse
  else on failure
    |||
    alt 401 error code
      App - -> Authentication: calls authenticate with the invalid ""accessToken"" to refresh for a new access token
      Authentication - -> App: returns a possible valid access token
      alt valid accessToken
      |||
        App -> APIX: continues the request with the ""accessToken"" asking for a resource
      |||  
      else invalid accessToken
        App - -> Authentication: shows session expiry dialog
      end
    |||
    else any other error code
      App - -> App: updates user with failure
    end
    |||
  end
  |||
end
@enduml

PlantUML version 1.2021.10(Mon Aug 30 13:43:48 UTC 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>