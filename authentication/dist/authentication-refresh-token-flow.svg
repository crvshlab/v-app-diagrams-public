<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="646px" preserveAspectRatio="none" style="width:1032px;height:646px;background:#FFFFFF;" version="1.1" viewBox="0 0 1032 646" width="1032px" zoomAndPan="magnify"><defs><filter height="300%" id="f2apyc6mycc3l" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#ADD8E6" filter="url(#f2apyc6mycc3l)" height="528.6047" style="stroke:#000000;stroke-width:2.0;" width="1008" x="10" y="57.2969"/><rect fill="#ADD8E6" filter="url(#f2apyc6mycc3l)" height="166.2703" style="stroke:#000000;stroke-width:2.0;" width="988" x="20" y="160.5625"/><rect fill="#ADD8E6" height="120.0047" style="stroke:none;stroke-width:1.0;" width="988" x="20" y="206.8281"/><rect fill="#ADD8E6" filter="url(#f2apyc6mycc3l)" height="213.0688" style="stroke:#000000;stroke-width:2.0;" width="969" x="39" y="340.8328"/><rect fill="#ADD8E6" height="112.6703" style="stroke:none;stroke-width:1.0;" width="969" x="39" y="441.2313"/><line style="stroke:#A80036;stroke-width:2.0;stroke-dasharray:5.0,5.0;" x1="73" x2="73" y1="40.2969" y2="602.9016"/><line style="stroke:#A80036;stroke-width:2.0;stroke-dasharray:5.0,5.0;" x1="412" x2="412" y1="40.2969" y2="602.9016"/><line style="stroke:#A80036;stroke-width:2.0;stroke-dasharray:5.0,5.0;" x1="971" x2="971" y1="40.2969" y2="602.9016"/><rect fill="#FEFECE" filter="url(#f2apyc6mycc3l)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="44" x="49" y="5"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="30" x="56" y="24.9951">App</text><rect fill="#FEFECE" filter="url(#f2apyc6mycc3l)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="44" x="49" y="601.9016"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="30" x="56" y="621.8967">App</text><rect fill="#FEFECE" filter="url(#f2apyc6mycc3l)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="122" x="349" y="5"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="108" x="356" y="24.9951">Authentication</text><rect fill="#FEFECE" filter="url(#f2apyc6mycc3l)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="122" x="349" y="601.9016"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="108" x="356" y="621.8967">Authentication</text><rect fill="#FEFECE" filter="url(#f2apyc6mycc3l)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="50" x="944" y="5"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="36" x="951" y="24.9951">IDTM</text><rect fill="#FEFECE" filter="url(#f2apyc6mycc3l)" height="30.2969" style="stroke:#A80036;stroke-width:1.5;" width="50" x="944" y="601.9016"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="36" x="951" y="621.8967">IDTM</text><path d="M10,57.2969 L167,57.2969 L167,64.2969 L157,74.2969 L10,74.2969 L10,57.2969 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="528.6047" style="stroke:#000000;stroke-width:2.0;" width="1008" x="10" y="57.2969"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="112" x="25" y="70.3638">Refresh Token</text><polygon fill="#A80036" points="400,116.5625,410,120.5625,400,124.5625,404,120.5625" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="73" x2="406" y1="120.5625" y2="120.5625"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="263" x="80" y="115.4966">calls authentication authenticate method</text><path d="M20,160.5625 L86,160.5625 L86,167.5625 L76,177.5625 L20,177.5625 L20,160.5625 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="166.2703" style="stroke:#000000;stroke-width:2.0;" width="988" x="20" y="160.5625"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="35" y="173.6294">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="138" x="101" y="172.7729">[accessToken is null]</text><polygon fill="#A80036" points="959,194.8281,969,198.8281,959,202.8281,963,198.8281" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="412" x2="965" y1="198.8281" y2="198.8281"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="528" x="419" y="193.7622">calls IDTM authenticate method with showIdGateway false and a null accessToken</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="1008" y1="207.8281" y2="207.8281"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="157" x="25" y="218.0386">[accessToken is invalid]</text><polygon fill="#A80036" points="959,276.7992,969,280.7992,959,284.7992,963,280.7992" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="412" x2="965" y1="280.7992" y2="280.7992"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="535" x="419" y="275.7333">calls IDTM authenticate method with showIdGateway false and invalid accessToken</text><path d="M30,251.6328 L30,292.6328 L403,292.6328 L403,261.6328 L393,251.6328 L30,251.6328 " fill="#FBFB77" filter="url(#f2apyc6mycc3l)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M393,251.6328 L393,261.6328 L403,261.6328 L393,251.6328 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="250" x="36" y="269.1669">this case happens when APIX returns a</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="24" x="290" y="268.6708">401</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="70" x="318" y="269.1669">error code.</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="23" x="36" y="284.7669">see</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="112" x="63" y="284.2708">APIX 401 Error</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="53" x="179" y="284.7669">diagram</text><path d="M39,340.8328 L105,340.8328 L105,347.8328 L95,357.8328 L39,357.8328 L39,340.8328 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="213.0688" style="stroke:#000000;stroke-width:2.0;" width="969" x="39" y="340.8328"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="21" x="54" y="353.8997">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="82" x="120" y="353.0433">[on success]</text><polygon fill="#A80036" points="423,375.0985,413,379.0985,423,383.0985,419,379.0985" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="417" x2="970" y1="379.0985" y2="379.0985"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="180" x="429" y="374.0325">returns a valid access token</text><polygon fill="#A80036" points="84,404.2313,74,408.2313,84,412.2313,80,408.2313" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="78" x2="411" y1="408.2313" y2="408.2313"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="315" x="90" y="403.1654">network request continues with the access token</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="39" x2="1008" y1="442.2313" y2="442.2313"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="76" x="44" y="452.4417">[on failure]</text><polygon fill="#A80036" points="423,473.1688,413,477.1688,423,481.1688,419,477.1688" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="417" x2="970" y1="477.1688" y2="477.1688"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="205" x="429" y="472.1029">returns exception to be handled</text><path d="M285,490.1688 L285,515.1688 L534,515.1688 L534,500.1688 L524,490.1688 L285,490.1688 " fill="#FBFB77" filter="url(#f2apyc6mycc3l)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M524,490.1688 L524,500.1688 L534,500.1688 L524,490.1688 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="23" x="291" y="507.7029">see</text><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacing" textLength="144" x="318" y="507.2068">RefreshToken Error</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="53" x="466" y="507.7029">diagram</text><polygon fill="#A80036" points="84,541.9016,74,545.9016,84,549.9016,80,545.9016" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="78" x2="411" y1="545.9016" y2="545.9016"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="135" x="90" y="540.8357">network request fails</text><!--MD5=[3fa034770098e6ce1db7631b3c544f54]
@startuml
!$PRIMARY = "#2A9FD6"
!$SECONDARY_DARK = "#777777"
!$BGCOLOR = "#LightBlue"
!$DARK = "#000000"

skinparam defaultFontName       "Verdana"

skinparam title {
	FontColor	                 $PRIMARY
	BorderColor	                 $SECONDARY_DARK
	FontSize	    	         20
	BorderRoundCorner            8
	BorderThickness 	         1
	BackgroundColor              $BGCOLOR
}

!startsub sequence

skinparam sequence {
	BackgroundColor $BGCOLOR
	StartColor $PRIMARY
	EndColor $PRIMARY
	''
	BoxBackgroundColor $BGCOLOR
	BoxBorderColor $DARK
	BoxFontColor $DARK
	''
	DelayFontColor $DARK
	''
	LifeLineBorderThickness 2
	LifeLineBackgroundColor $BGCOLOR
	''
	GroupBorderColor $DARK
	GroupFontColor $DARK
	GroupBodyBackgroundColor $BGCOLOR
	GroupHeaderBackgroundColor $BGCOLOR
	''
	DividerBackgroundColor $BGCOLOR
    DividerBorderColor $DARK
    DividerBorderThickness 2
    DividerFontColor $DARK
	''
	ReferenceBackgroundColor $BGCOLOR
	ReferenceBorderColor $DARK
	ReferenceFontColor $DARK
	ReferenceHeaderBackgroundColor $BGCOLOR
}
!endsub

!procedure loop_arrowR()
  <<- - -
!endprocedure

group Refresh Token
  |||
  App - -> Authentication: calls authentication authenticate method
  |||
  alt accessToken is null
    Authentication -> IDTM: calls IDTM authenticate method with showIdGateway false and a null accessToken
  else accessToken is invalid
    |||
    Authentication -> IDTM: calls IDTM authenticate method with showIdGateway false and invalid accessToken
    note left
      this case happens when APIX returns a ""401"" error code.
      see ""APIX 401 Error"" diagram
    end note
    |||
  end

  alt on success

    Authentication <- IDTM: returns a valid access token
    Authentication - -> App: network request continues with the access token
    |||
  else on failure
    IDTM -> Authentication: returns exception to be handled
    note over Authentication: see ""RefreshToken Error"" diagram
    Authentication - -> App: network request fails
  end
  |||
end
@enduml

@startuml

skinparam defaultFontName       "Verdana"

skinparam title {
	FontColor	                 #2A9FD6
	BorderColor	                 #777777
	FontSize	    	         20
	BorderRoundCorner            8
	BorderThickness 	         1
	BackgroundColor              #LightBlue
}


skinparam sequence {
	BackgroundColor #LightBlue
	StartColor #2A9FD6
	EndColor #2A9FD6
	BoxBackgroundColor #LightBlue
	BoxBorderColor #000000
	BoxFontColor #000000
	DelayFontColor #000000
	LifeLineBorderThickness 2
	LifeLineBackgroundColor #LightBlue
	GroupBorderColor #000000
	GroupFontColor #000000
	GroupBodyBackgroundColor #LightBlue
	GroupHeaderBackgroundColor #LightBlue
	DividerBackgroundColor #LightBlue
    DividerBorderColor #000000
    DividerBorderThickness 2
    DividerFontColor #000000
	ReferenceBackgroundColor #LightBlue
	ReferenceBorderColor #000000
	ReferenceFontColor #000000
	ReferenceHeaderBackgroundColor #LightBlue
}


group Refresh Token
  |||
  App - -> Authentication: calls authentication authenticate method
  |||
  alt accessToken is null
    Authentication -> IDTM: calls IDTM authenticate method with showIdGateway false and a null accessToken
  else accessToken is invalid
    |||
    Authentication -> IDTM: calls IDTM authenticate method with showIdGateway false and invalid accessToken
    note left
      this case happens when APIX returns a ""401"" error code.
      see ""APIX 401 Error"" diagram
    end note
    |||
  end

  alt on success

    Authentication <- IDTM: returns a valid access token
    Authentication - -> App: network request continues with the access token
    |||
  else on failure
    IDTM -> Authentication: returns exception to be handled
    note over Authentication: see ""RefreshToken Error"" diagram
    Authentication - -> App: network request fails
  end
  |||
end
@enduml

PlantUML version 1.2021.10(Mon Aug 30 13:43:48 UTC 2021)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>