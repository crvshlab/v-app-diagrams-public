<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="669px" preserveAspectRatio="none" style="width:1994px;height:669px;background:#FFFFFF;" version="1.1" viewBox="0 0 1994 669" width="1994px" zoomAndPan="magnify"><defs><filter height="300%" id="fc82z3fubtapv" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[422f32e14b749b8fb02ca25937777587]
class WRGStatus--><rect codeLine="1" fill="#FEFECE" filter="url(#fc82z3fubtapv)" height="99.2188" id="WRGStatus" style="stroke:#A80036;stroke-width:1.5;" width="112" x="1016.5" y="7"/><ellipse cx="1031.5" cy="23" fill="#EB937F" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1035.6094,29 L1027.8906,29 L1027.8906,16.6094 L1035.6094,16.6094 L1035.6094,18.7656 L1030.3438,18.7656 L1030.3438,21.4375 L1035.1094,21.4375 L1035.1094,23.5938 L1030.3438,23.5938 L1030.3438,26.8438 L1035.6094,26.8438 L1035.6094,29 Z " fill="#000000"/><ellipse cx="1050.5" cy="22.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="69" x="1056.5" y="27.1543">WRGStatus</text><line style="stroke:#A80036;stroke-width:1.5;" x1="1017.5" x2="1127.5" y1="39" y2="39"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="24" x="1022.5" y="53.2104">IDLE</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="75" x="1022.5" y="66.0151">CONNECTING</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="70" x="1022.5" y="78.8198">REGISTERED</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="37" x="1022.5" y="91.6245">FAILED</text><line style="stroke:#A80036;stroke-width:1.5;" x1="1017.5" x2="1127.5" y1="98.2188" y2="98.2188"/><!--MD5=[11ff4f83bdd011ecce3eaefab1505150]
class WRGType--><rect codeLine="8" fill="#FEFECE" filter="url(#fc82z3fubtapv)" height="73.6094" id="WRGType" style="stroke:#A80036;stroke-width:1.5;" width="100" x="1163.5" y="19.5"/><ellipse cx="1178.5" cy="35.5" fill="#EB937F" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1182.6094,41.5 L1174.8906,41.5 L1174.8906,29.1094 L1182.6094,29.1094 L1182.6094,31.2656 L1177.3438,31.2656 L1177.3438,33.9375 L1182.1094,33.9375 L1182.1094,36.0938 L1177.3438,36.0938 L1177.3438,39.3438 L1182.6094,39.3438 L1182.6094,41.5 Z " fill="#000000"/><ellipse cx="1197.5" cy="35" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="57" x="1203.5" y="39.6543">WRGType</text><line style="stroke:#A80036;stroke-width:1.5;" x1="1164.5" x2="1262.5" y1="51.5" y2="51.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="30" x="1169.5" y="65.7104">CHAT</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="34" x="1169.5" y="78.5151">VOICE</text><line style="stroke:#A80036;stroke-width:1.5;" x1="1164.5" x2="1262.5" y1="85.1094" y2="85.1094"/><!--MD5=[0c456de9f81515078d6382ca56629a09]
class WRGAuthData--><rect codeLine="13" fill="#FEFECE" filter="url(#fc82z3fubtapv)" height="86.4141" id="WRGAuthData" style="stroke:#A80036;stroke-width:1.5;" width="130" x="1007.5" y="185.5"/><ellipse cx="1022.5" cy="201.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1025.4688,207.1406 Q1024.8906,207.4375 1024.25,207.5781 Q1023.6094,207.7344 1022.9063,207.7344 Q1020.4063,207.7344 1019.0781,206.0938 Q1017.7656,204.4375 1017.7656,201.3125 Q1017.7656,198.1875 1019.0781,196.5313 Q1020.4063,194.875 1022.9063,194.875 Q1023.6094,194.875 1024.25,195.0313 Q1024.9063,195.1875 1025.4688,195.4844 L1025.4688,198.2031 Q1024.8438,197.625 1024.25,197.3594 Q1023.6563,197.0781 1023.0313,197.0781 Q1021.6875,197.0781 1021,198.1563 Q1020.3125,199.2188 1020.3125,201.3125 Q1020.3125,203.4063 1021,204.4844 Q1021.6875,205.5469 1023.0313,205.5469 Q1023.6563,205.5469 1024.25,205.2813 Q1024.8438,205 1025.4688,204.4219 L1025.4688,207.1406 Z " fill="#000000"/><ellipse cx="1041.5" cy="201" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="87" x="1047.5" y="205.6543">WRGAuthData</text><line style="stroke:#A80036;stroke-width:1.5;" x1="1008.5" x2="1136.5" y1="217.5" y2="217.5"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1015.5" y="225.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="81" x="1027.5" y="231.7104">clientId: string</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1015.5" y="238.3047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="96" x="1027.5" y="244.5151">sessionId: string</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1015.5" y="251.1094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="72" x="1027.5" y="257.3198">token: string</text><line style="stroke:#A80036;stroke-width:1.5;" x1="1008.5" x2="1136.5" y1="263.9141" y2="263.9141"/><!--MD5=[6cd4291a55d573d0d9b1338eb540a0c9]
class WRG--><rect codeLine="19" fill="#FEFECE" filter="url(#fc82z3fubtapv)" height="124.8281" id="WRG" style="stroke:#A80036;stroke-width:1.5;" width="216" x="706.5" y="166"/><ellipse cx="790.75" cy="182" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M793.7188,187.6406 Q793.1406,187.9375 792.5,188.0781 Q791.8594,188.2344 791.1563,188.2344 Q788.6563,188.2344 787.3281,186.5938 Q786.0156,184.9375 786.0156,181.8125 Q786.0156,178.6875 787.3281,177.0313 Q788.6563,175.375 791.1563,175.375 Q791.8594,175.375 792.5,175.5313 Q793.1563,175.6875 793.7188,175.9844 L793.7188,178.7031 Q793.0938,178.125 792.5,177.8594 Q791.9063,177.5781 791.2813,177.5781 Q789.9375,177.5781 789.25,178.6563 Q788.5625,179.7188 788.5625,181.8125 Q788.5625,183.9063 789.25,184.9844 Q789.9375,186.0469 791.2813,186.0469 Q791.9063,186.0469 792.5,185.7813 Q793.0938,185.5 793.7188,184.9219 L793.7188,187.6406 Z " fill="#000000"/><ellipse cx="816.25" cy="181.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="28" x="822.25" y="186.1543">WRG</text><line style="stroke:#A80036;stroke-width:1.5;" x1="707.5" x2="921.5" y1="198" y2="198"/><ellipse cx="717.5" cy="209" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="84" x="726.5" y="212.2104">type: WRGType</text><ellipse cx="717.5" cy="221.8047" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="190" x="726.5" y="225.0151">webSocket: WebSocketRepository</text><ellipse cx="717.5" cy="234.6094" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="189" x="726.5" y="237.8198">status: Observable&lt;WRGStatus&gt;</text><line style="stroke:#A80036;stroke-width:1.5;" x1="707.5" x2="921.5" y1="244.4141" y2="244.4141"/><ellipse cx="717.5" cy="255.4141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="117" x="726.5" y="258.6245">WRG(type: WRGType)</text><ellipse cx="717.5" cy="268.2188" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="52" x="726.5" y="271.4292">connect()</text><ellipse cx="717.5" cy="281.0234" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="69" x="726.5" y="284.2339">disconnect()</text><path d="M265.5,211 L265.5,236.1328 A0,0 0 0 0 265.5,236.1328 L671.5,236.1328 A0,0 0 0 0 671.5,236.1328 L671.5,229 L710.5,267.6211 L671.5,221 L671.5,221 L661.5,211 L265.5,211 A0,0 0 0 0 265.5,211 " fill="#FBFB77" filter="url(#fc82z3fubtapv)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M661.5,211 L661.5,221 L671.5,221 L661.5,211 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="385" x="271.5" y="228.0669">Starts `registration` and establishes WebSocket Connection</text><!--MD5=[87431058471752df5b1c591a901267f7]
class VoiceWRG--><rect codeLine="33" fill="#FEFECE" filter="url(#fc82z3fubtapv)" height="60.8047" id="VoiceWRG" style="stroke:#A80036;stroke-width:1.5;" width="123" x="704" y="26"/><ellipse cx="727.1" cy="42" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M730.0688,47.6406 Q729.4906,47.9375 728.85,48.0781 Q728.2094,48.2344 727.5063,48.2344 Q725.0063,48.2344 723.6781,46.5938 Q722.3656,44.9375 722.3656,41.8125 Q722.3656,38.6875 723.6781,37.0313 Q725.0063,35.375 727.5063,35.375 Q728.2094,35.375 728.85,35.5313 Q729.5063,35.6875 730.0688,35.9844 L730.0688,38.7031 Q729.4438,38.125 728.85,37.8594 Q728.2563,37.5781 727.6313,37.5781 Q726.2875,37.5781 725.6,38.6563 Q724.9125,39.7188 724.9125,41.8125 Q724.9125,43.9063 725.6,44.9844 Q726.2875,46.0469 727.6313,46.0469 Q728.2563,46.0469 728.85,45.7813 Q729.4438,45.5 730.0688,44.9219 L730.0688,47.6406 Z " fill="#000000"/><ellipse cx="747.9" cy="41.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="62" x="753.9" y="46.1543">VoiceWRG</text><line style="stroke:#A80036;stroke-width:1.5;" x1="705" x2="826" y1="58" y2="58"/><ellipse cx="715" cy="69" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="97" x="724" y="72.2104">api: WRGVoiceAPI</text><line style="stroke:#A80036;stroke-width:1.5;" x1="705" x2="826" y1="78.8047" y2="78.8047"/><!--MD5=[9e4f34c8d4f7f7a12d643de2d4e8f14e]
class ChatWRG--><rect codeLine="37" fill="#FEFECE" filter="url(#fc82z3fubtapv)" height="60.8047" id="ChatWRG" style="stroke:#A80036;stroke-width:1.5;" width="119" x="862" y="26"/><ellipse cx="885.55" cy="42" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M888.5188,47.6406 Q887.9406,47.9375 887.3,48.0781 Q886.6594,48.2344 885.9563,48.2344 Q883.4563,48.2344 882.1281,46.5938 Q880.8156,44.9375 880.8156,41.8125 Q880.8156,38.6875 882.1281,37.0313 Q883.4563,35.375 885.9563,35.375 Q886.6594,35.375 887.3,35.5313 Q887.9563,35.6875 888.5188,35.9844 L888.5188,38.7031 Q887.8938,38.125 887.3,37.8594 Q886.7063,37.5781 886.0813,37.5781 Q884.7375,37.5781 884.05,38.6563 Q883.3625,39.7188 883.3625,41.8125 Q883.3625,43.9063 884.05,44.9844 Q884.7375,46.0469 886.0813,46.0469 Q886.7063,46.0469 887.3,45.7813 Q887.8938,45.5 888.5188,44.9219 L888.5188,47.6406 Z " fill="#000000"/><ellipse cx="906.45" cy="41.5" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="57" x="912.45" y="46.1543">ChatWRG</text><line style="stroke:#A80036;stroke-width:1.5;" x1="863" x2="980" y1="58" y2="58"/><ellipse cx="873" cy="69" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="93" x="882" y="72.2104">api: WRGChatAPI</text><line style="stroke:#A80036;stroke-width:1.5;" x1="863" x2="980" y1="78.8047" y2="78.8047"/><!--MD5=[8b9800b01682362c8ee0fec59d1ed0c9]
class WebSocketRepository--><rect codeLine="41" fill="#FEFECE" filter="url(#fc82z3fubtapv)" height="60.8047" id="WebSocketRepository" style="stroke:#A80036;stroke-width:1.5;" width="245" x="692" y="472.5"/><ellipse cx="736.75" cy="488.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M739.7188,494.1406 Q739.1406,494.4375 738.5,494.5781 Q737.8594,494.7344 737.1563,494.7344 Q734.6563,494.7344 733.3281,493.0938 Q732.0156,491.4375 732.0156,488.3125 Q732.0156,485.1875 733.3281,483.5313 Q734.6563,481.875 737.1563,481.875 Q737.8594,481.875 738.5,482.0313 Q739.1563,482.1875 739.7188,482.4844 L739.7188,485.2031 Q739.0938,484.625 738.5,484.3594 Q737.9063,484.0781 737.2813,484.0781 Q735.9375,484.0781 735.25,485.1563 Q734.5625,486.2188 734.5625,488.3125 Q734.5625,490.4063 735.25,491.4844 Q735.9375,492.5469 737.2813,492.5469 Q737.9063,492.5469 738.5,492.2813 Q739.0938,492 739.7188,491.4219 L739.7188,494.1406 Z " fill="#000000"/><ellipse cx="762.25" cy="488" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="136" x="768.25" y="492.6543">WebSocketRepository</text><line style="stroke:#A80036;stroke-width:1.5;" x1="693" x2="936" y1="504.5" y2="504.5"/><ellipse cx="703" cy="515.5" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="219" x="712" y="518.7104">messages: Observable&lt;WSMessage&gt;</text><line style="stroke:#A80036;stroke-width:1.5;" x1="693" x2="936" y1="525.3047" y2="525.3047"/><!--MD5=[4f2c074e928f6bcd02c216b9e1e9c59b]
class WRGRegistrationUseCase--><rect codeLine="45" fill="#FEFECE" filter="url(#fc82z3fubtapv)" height="73.6094" id="WRGRegistrationUseCase" style="stroke:#A80036;stroke-width:1.5;" width="344" x="972.5" y="466"/><ellipse cx="1055.25" cy="482" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1058.2188,487.6406 Q1057.6406,487.9375 1057,488.0781 Q1056.3594,488.2344 1055.6563,488.2344 Q1053.1563,488.2344 1051.8281,486.5938 Q1050.5156,484.9375 1050.5156,481.8125 Q1050.5156,478.6875 1051.8281,477.0313 Q1053.1563,475.375 1055.6563,475.375 Q1056.3594,475.375 1057,475.5313 Q1057.6563,475.6875 1058.2188,475.9844 L1058.2188,478.7031 Q1057.5938,478.125 1057,477.8594 Q1056.4063,477.5781 1055.7813,477.5781 Q1054.4375,477.5781 1053.75,478.6563 Q1053.0625,479.7188 1053.0625,481.8125 Q1053.0625,483.9063 1053.75,484.9844 Q1054.4375,486.0469 1055.7813,486.0469 Q1056.4063,486.0469 1057,485.7813 Q1057.5938,485.5 1058.2188,484.9219 L1058.2188,487.6406 Z " fill="#000000"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1077.75" y="478.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="159" x="1086.75" y="486.1543">WRGRegistrationUseCase</text><line style="stroke:#A80036;stroke-width:1.5;" x1="973.5" x2="1315.5" y1="498" y2="498"/><line style="stroke:#A80036;stroke-width:1.5;" x1="973.5" x2="1315.5" y1="506" y2="506"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="980.5" y="514"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="318" x="992.5" y="520.2104">WRGRegistrationUSeCase(WRGAuthenticationRepository)</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="980.5" y="526.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="53" x="992.5" y="533.0151">register()</text><!--MD5=[e514f70476f9ba86a923f12283f39fed]
class WRGChatAPI--><rect codeLine="59" fill="#FEFECE" filter="url(#fc82z3fubtapv)" height="112.0234" id="WRGChatAPI" style="stroke:#A80036;stroke-width:1.5;" width="342" x="1553.5" y="172.5"/><ellipse cx="1676.75" cy="188.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1679.7188,194.1406 Q1679.1406,194.4375 1678.5,194.5781 Q1677.8594,194.7344 1677.1563,194.7344 Q1674.6563,194.7344 1673.3281,193.0938 Q1672.0156,191.4375 1672.0156,188.3125 Q1672.0156,185.1875 1673.3281,183.5313 Q1674.6563,181.875 1677.1563,181.875 Q1677.8594,181.875 1678.5,182.0313 Q1679.1563,182.1875 1679.7188,182.4844 L1679.7188,185.2031 Q1679.0938,184.625 1678.5,184.3594 Q1677.9063,184.0781 1677.2813,184.0781 Q1675.9375,184.0781 1675.25,185.1563 Q1674.5625,186.2188 1674.5625,188.3125 Q1674.5625,190.4063 1675.25,191.4844 Q1675.9375,192.5469 1677.2813,192.5469 Q1677.9063,192.5469 1678.5,192.2813 Q1679.0938,192 1679.7188,191.4219 L1679.7188,194.1406 Z " fill="#000000"/><ellipse cx="1702.25" cy="188" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="76" x="1708.25" y="192.6543">WRGChatAPI</text><line style="stroke:#A80036;stroke-width:1.5;" x1="1554.5" x2="1894.5" y1="204.5" y2="204.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1554.5" x2="1894.5" y1="212.5" y2="212.5"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1561.5" y="220.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="316" x="1573.5" y="226.7104">WRGChatAPI(WRGService, WRGAuthenticationRepository)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="0" x="1577.5" y="239.5151"/><ellipse cx="1564.5" cy="249.1094" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="117" x="1573.5" y="252.3198">sendInitialMessage()</text><ellipse cx="1564.5" cy="261.9141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="87" x="1573.5" y="265.1245">sendMessage()</text><ellipse cx="1564.5" cy="274.7188" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="132" x="1573.5" y="277.9292">acknowledgeMessage()</text><path d="M1464,44 L1464,69.1328 A0,0 0 0 0 1464,69.1328 L1720.5,69.1328 L1724.5,172.38 L1728.5,69.1328 L1985,69.1328 A0,0 0 0 0 1985,69.1328 L1985,54 L1975,44 L1464,44 A0,0 0 0 0 1464,44 " fill="#FBFB77" filter="url(#fc82z3fubtapv)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1975,44 L1975,54 L1985,54 L1975,44 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="500" x="1470" y="61.0669">exposes chat REST API authenticating it with injected AuthenticationRepository</text><!--MD5=[001c9cc3f66b2ef5070204ebb03fab5b]
class WRGVoiceAPI--><rect codeLine="62" fill="#FEFECE" filter="url(#fc82z3fubtapv)" height="112.0234" id="WRGVoiceAPI" style="stroke:#A80036;stroke-width:1.5;" width="346" x="1172.5" y="172.5"/><ellipse cx="1295.25" cy="188.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1298.2188,194.1406 Q1297.6406,194.4375 1297,194.5781 Q1296.3594,194.7344 1295.6563,194.7344 Q1293.1563,194.7344 1291.8281,193.0938 Q1290.5156,191.4375 1290.5156,188.3125 Q1290.5156,185.1875 1291.8281,183.5313 Q1293.1563,181.875 1295.6563,181.875 Q1296.3594,181.875 1297,182.0313 Q1297.6563,182.1875 1298.2188,182.4844 L1298.2188,185.2031 Q1297.5938,184.625 1297,184.3594 Q1296.4063,184.0781 1295.7813,184.0781 Q1294.4375,184.0781 1293.75,185.1563 Q1293.0625,186.2188 1293.0625,188.3125 Q1293.0625,190.4063 1293.75,191.4844 Q1294.4375,192.5469 1295.7813,192.5469 Q1296.4063,192.5469 1297,192.2813 Q1297.5938,192 1298.2188,191.4219 L1298.2188,194.1406 Z " fill="#000000"/><ellipse cx="1320.75" cy="188" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="81" x="1326.75" y="192.6543">WRGVoiceAPI</text><line style="stroke:#A80036;stroke-width:1.5;" x1="1173.5" x2="1517.5" y1="204.5" y2="204.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1173.5" x2="1517.5" y1="212.5" y2="212.5"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1180.5" y="220.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="320" x="1192.5" y="226.7104">WRGVoiceAPI(WRGService, WRGAuthenticationRepository)</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="0" x="1196.5" y="239.5151"/><ellipse cx="1183.5" cy="249.1094" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="80" x="1192.5" y="252.3198">startVoIPCall()</text><ellipse cx="1183.5" cy="261.9141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="74" x="1192.5" y="265.1245">endVoIPCall()</text><ellipse cx="1183.5" cy="274.7188" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="143" x="1192.5" y="277.9292">sendVoIPSessionStatus()</text><!--MD5=[c0584d362fe6d201cbf2ddf6b6491907]
class WRGService--><rect codeLine="70" fill="#FEFECE" filter="url(#fc82z3fubtapv)" height="304.0938" id="WRGService" style="stroke:#A80036;stroke-width:1.5;" width="194" x="1489.5" y="351"/><ellipse cx="1540.25" cy="367" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M1543.2188,372.6406 Q1542.6406,372.9375 1542,373.0781 Q1541.3594,373.2344 1540.6563,373.2344 Q1538.1563,373.2344 1536.8281,371.5938 Q1535.5156,369.9375 1535.5156,366.8125 Q1535.5156,363.6875 1536.8281,362.0313 Q1538.1563,360.375 1540.6563,360.375 Q1541.3594,360.375 1542,360.5313 Q1542.6563,360.6875 1543.2188,360.9844 L1543.2188,363.7031 Q1542.5938,363.125 1542,362.8594 Q1541.4063,362.5781 1540.7813,362.5781 Q1539.4375,362.5781 1538.75,363.6563 Q1538.0625,364.7188 1538.0625,366.8125 Q1538.0625,368.9063 1538.75,369.9844 Q1539.4375,371.0469 1540.7813,371.0469 Q1541.4063,371.0469 1542,370.7813 Q1542.5938,370.5 1543.2188,369.9219 L1543.2188,372.6406 Z " fill="#000000"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1562.75" y="363.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="73" x="1571.75" y="371.1543">WRGService</text><line style="stroke:#A80036;stroke-width:1.5;" x1="1490.5" x2="1682.5" y1="383" y2="383"/><line style="stroke:#A80036;stroke-width:1.5;" x1="1490.5" x2="1682.5" y1="391" y2="391"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1497.5" y="399"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="117" x="1509.5" y="405.2104">sendInitialMessage()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1497.5" y="411.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="87" x="1509.5" y="418.0151">sendMessage()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1497.5" y="424.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="132" x="1509.5" y="430.8198">acknowledgeMessage()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="0" x="1513.5" y="443.6245"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1497.5" y="450.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="80" x="1509.5" y="456.4292">startVoIPCall()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1497.5" y="463.0234"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="74" x="1509.5" y="469.2339">endVoIPCall()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1497.5" y="475.8281"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="143" x="1509.5" y="482.0386">sendVoIPSessionStatus()</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="0" x="1513.5" y="494.8433"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1497.5" y="501.4375"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="147" x="1509.5" y="507.6479">getWebRTCConfiguration()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1497.5" y="514.2422"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="168" x="1509.5" y="520.4526">updateWebRTCConfiguration()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1497.5" y="527.0469"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="138" x="1509.5" y="533.2573">generateWebRTCToken()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1497.5" y="539.8516"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="103" x="1509.5" y="546.062">startRegistration()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1497.5" y="552.6563"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="153" x="1509.5" y="558.8667">createNotificationChannel()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1497.5" y="565.4609"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="70" x="1509.5" y="571.6714">getLineInfo()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1497.5" y="578.2656"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="81" x="1509.5" y="584.4761">getCapability()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1497.5" y="591.0703"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="107" x="1509.5" y="597.2808">finishRegistration()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1497.5" y="603.875"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="118" x="1509.5" y="610.0854">refreshRegistration()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1497.5" y="616.6797"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="111" x="1509.5" y="622.8901">deleteRegistration()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1497.5" y="629.4844"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="128" x="1509.5" y="635.6948">refreshClientSession()</text><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="1497.5" y="642.2891"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="159" x="1509.5" y="648.4995">refreshNotificationChannel()</text><!--MD5=[9aa86340abc9cfe5e12b2c0a1637692c]
class WRGAuthenticationRepository--><rect codeLine="97" fill="#FEFECE" filter="url(#fc82z3fubtapv)" height="73.6094" id="WRGAuthenticationRepository" style="stroke:#A80036;stroke-width:1.5;" width="299" x="358" y="466"/><ellipse cx="404.75" cy="482" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M407.7188,487.6406 Q407.1406,487.9375 406.5,488.0781 Q405.8594,488.2344 405.1563,488.2344 Q402.6563,488.2344 401.3281,486.5938 Q400.0156,484.9375 400.0156,481.8125 Q400.0156,478.6875 401.3281,477.0313 Q402.6563,475.375 405.1563,475.375 Q405.8594,475.375 406.5,475.5313 Q407.1563,475.6875 407.7188,475.9844 L407.7188,478.7031 Q407.0938,478.125 406.5,477.8594 Q405.9063,477.5781 405.2813,477.5781 Q403.9375,477.5781 403.25,478.6563 Q402.5625,479.7188 402.5625,481.8125 Q402.5625,483.9063 403.25,484.9844 Q403.9375,486.0469 405.2813,486.0469 Q405.9063,486.0469 406.5,485.7813 Q407.0938,485.5 407.7188,484.9219 L407.7188,487.6406 Z " fill="#000000"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="427.25" y="478.5"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacing" textLength="186" x="436.25" y="486.1543">WRGAuthenticationRepository</text><line style="stroke:#A80036;stroke-width:1.5;" x1="359" x2="656" y1="498" y2="498"/><ellipse cx="369" cy="509" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;fill:none;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="273" x="378" y="512.2104">authenticationData: Observable&lt;WRGAuthData&gt;</text><line style="stroke:#A80036;stroke-width:1.5;" x1="359" x2="656" y1="518.8047" y2="518.8047"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="366" y="526.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="114" x="378" y="533.0151">store(WRGAuthData)</text><path d="M6,490.5 L6,515.6328 A0,0 0 0 0 6,515.6328 L323,515.6328 A0,0 0 0 0 323,515.6328 L323,508.5 L357.81,503 L323,500.5 L323,500.5 L313,490.5 L6,490.5 A0,0 0 0 0 6,490.5 " fill="#FBFB77" filter="url(#fc82z3fubtapv)" style="stroke:#A80036;stroke-width:1.0;"/><path d="M313,490.5 L313,500.5 L323,500.5 L313,490.5 " fill="#FBFB77" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="296" x="12" y="507.5669">Stores AuthData retrieved from `Registration`</text><!--MD5=[02ee632ab86a36761cb1401dec27d50b]
link WRG$$$LEFT to WRG--><!--MD5=[a4540816900ad98aa63df4c924b6923f]
reverse link WRG to WebSocketRepository--><path codeLine="100" d="M814.5,304.65 C814.5,360.01 814.5,432.34 814.5,472.27 " fill="none" id="WRG-backto-WebSocketRepository" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="814.5,291.33,810.5,297.33,814.5,303.33,818.5,297.33,814.5,291.33" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[b49c3b077bfb469b7d6b78b1dbf2308b]
reverse link WRG to WRGRegistrationUseCase--><path codeLine="101" d="M899.52,299.71 C963.89,352.86 1049.67,423.69 1100.78,465.9 " fill="none" id="WRG-backto-WRGRegistrationUseCase" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="889.38,291.33,891.4636,298.2335,898.6375,298.9654,896.5539,292.0619,889.38,291.33" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[5a2cc36e66d1debecd007f3bbef554ac]
reverse link WRG to WRGAuthenticationRepository--><path codeLine="102" d="M733.08,299.67 C713.81,316.42 693.37,334.28 674.5,351 C630.61,389.88 580.82,435.04 547.11,465.77 " fill="none" id="WRG-backto-WRGAuthenticationRepository" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="743.03,291.03,735.8774,291.9463,733.9722,298.9012,741.1248,297.9849,743.03,291.03" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[8dbba4ec38d8f2d59f6d2ff5332d92ea]
reverse link VoiceWRG to WRG--><path codeLine="104" d="M779.64,106.57 C784.98,125.07 791.11,146.35 796.73,165.86 " fill="none" id="VoiceWRG-backto-WRG" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="772.85,108.27,774.04,87.11,786.3,104.39,772.85,108.27" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[57f441d26ba2f5da21eae87758040244]
reverse link ChatWRG to WRG--><path codeLine="106" d="M892.11,104.2 C880.12,123.24 866.1,145.51 853.3,165.86 " fill="none" id="ChatWRG-backto-WRG" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="none" points="886.28,100.31,902.86,87.11,898.13,107.77,886.28,100.31" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[6dec238cd4b798ea7942fcbdf96d8396]
reverse link WRGVoiceAPI to WRGService--><path codeLine="108" d="M1403.15,294.69 C1428.93,323.84 1460.04,359.01 1489.25,392.04 " fill="none" id="WRGVoiceAPI-backto-WRGService" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1394.27,284.64,1395.2476,291.7845,1402.2186,293.63,1401.241,286.4854,1394.27,284.64" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[8b81ac05195cce2b043d83c361a2914d]
reverse link WRGChatAPI to WRGService--><path codeLine="109" d="M1690.59,296.46 C1682.13,313.17 1672.7,331.78 1663.08,350.79 " fill="none" id="WRGChatAPI-backto-WRGService" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="1696.57,284.64,1690.2915,288.1869,1691.1508,295.3466,1697.4293,291.7997,1696.57,284.64" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[993087409945a2f15d16822c16875259]
link WRGStatus to WRGType--><!--MD5=[703dcbebc47ef18eb7d0f09d18e5f915]
link WRGStatus to WRGAuthData--><!--MD5=[46e1a2253c0def306cd516591032ce31]
@startuml
+enum WRGStatus {
    IDLE
    CONNECTING
    REGISTERED
    FAILED
}

+enum WRGType {
    CHAT
    VOICE
}

+class WRGAuthData {
    -clientId: string
    -sessionId: string
    -token: string
}

+class WRG {
    +WRG(type: WRGType)
    +connect()
    +disconnect()

    +type: WRGType
    +webSocket: WebSocketRepository
    +status: Observable<WRGStatus>
}

note left of WRG::connect
  Starts `registration` and establishes WebSocket Connection
end note

+class VoiceWRG {
    +api: WRGVoiceAPI
}

+class ChatWRG {
    +api: WRGChatAPI
}

+class WebSocketRepository {
    +messages: Observable<WSMessage>
}

-class WRGRegistrationUseCase {
    -WRGRegistrationUSeCase(WRGAuthenticationRepository)
    -register()
}

+class WRGChatAPI {

    -WRGChatAPI(WRGService, WRGAuthenticationRepository)

    +sendInitialMessage()
    +sendMessage()
    +acknowledgeMessage()
}

class WRGChatAPI
note top: exposes chat REST API authenticating it with injected AuthenticationRepository

+class WRGVoiceAPI {
    -WRGVoiceAPI(WRGService, WRGAuthenticationRepository)

    +startVoIPCall()
    +endVoIPCall()
    +sendVoIPSessionStatus()
}

-class WRGService {
    -sendInitialMessage()
    -sendMessage()
    -acknowledgeMessage()
    
    -startVoIPCall()
    -endVoIPCall()
    -sendVoIPSessionStatus()
    
    -getWebRTCConfiguration()
    -updateWebRTCConfiguration()
    -generateWebRTCToken()
    -startRegistration()
    -createNotificationChannel()
    -getLineInfo()
    -getCapability()
    -finishRegistration()
    -refreshRegistration()
    -deleteRegistration()
    -refreshClientSession()
    -refreshNotificationChannel()
}

-class WRGAuthenticationRepository {
    +authenticationData: Observable<WRGAuthData>
    -store(WRGAuthData)
}
class WRGAuthenticationRepository
note left: Stores AuthData retrieved from `Registration`

WRG *- - WebSocketRepository
WRG *- - WRGRegistrationUseCase
WRG *- - WRGAuthenticationRepository

VoiceWRG <|- - WRG

ChatWRG <|- - WRG

WRGVoiceAPI *- - WRGService
WRGChatAPI *- - WRGService
@enduml

PlantUML version 1.2021.11(Sat Oct 02 13:26:11 GMT 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>